<div class="admin-dashboard">
  <app-navbar></app-navbar>

  <div class="dashboard-content">
    <!-- Stats Cards -->
    <app-admin-stats
      [totalUsers]="totalUsers()"
      [totalPosts]="totalPosts()"
      [pendingReports]="pendingReports()"
      [totalEngagement]="totalEngagement()"
    ></app-admin-stats>

    <!-- Tabs -->
    <mat-tab-group
      class="admin-tabs"
      animationDuration="300ms"
      (selectedIndexChange)="onTabChange($event)"
    >
      <!-- Reports Tab -->
      <mat-tab label="Reports" [matBadge]="pendingReports()" matBadgeColor="warn">
        <app-admin-reports
          [reports]="reports()"
          [hasMoreReports]="hasMoreReports()"
          [isLoadingMoreReports]="isLoadingMoreReports()"
          [isMobile]="isMobile()"
          (loadMore)="loadMoreReports()"
          (viewReport)="viewReport($event)"
          (resolveReport)="resolveReport($event)"
          (dismissReport)="dismissReport($event)"
          (viewUser)="viewUser($event)"
          (banUser)="banUser($event)"
          (viewPost)="viewPost($event)"
          (hidePost)="hidePost($event)"
          (filterChange)="onFilterReports($event)"
        ></app-admin-reports>
      </mat-tab>

      <!-- Users Tab -->
      <mat-tab label="Users">
        <app-admin-users
          [users]="users()"
          [hasMoreUsers]="hasMoreUsers()"
          [isLoadingMoreUsers]="isLoadingMoreUsers()"
          [isMobile]="isMobile()"
          (loadMore)="loadMoreUsers()"
          (search)="onUserSearch($event)"
          (viewUser)="viewUser($event)"
          (banUser)="banUser($event)"
          (unbanUser)="unbanUser($event)"
          (deleteUser)="deleteUser($event)"
        ></app-admin-users>
      </mat-tab>

      <!-- Posts Tab -->
      <mat-tab label="Posts">
        <app-admin-posts
          [posts]="posts()"
          [hasMorePosts]="hasMorePosts()"
          [isLoadingMorePosts]="isLoadingMorePosts()"
          [isMobile]="isMobile()"
          (loadMore)="loadMorePosts()"
          (search)="onPostSearch($event)"
          (viewPost)="viewPost($event)"
          (hidePost)="hidePost($event)"
          (unhidePost)="unhidePost($event)"
          (deletePost)="deletePost($event)"
        ></app-admin-posts>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
